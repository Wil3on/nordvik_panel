/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/nodes/[id]/route";
exports.ids = ["app/api/nodes/[id]/route"];
exports.modules = {

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// Mark this file as server-only - will not be included in client bundles\nconst dynamic = 'force-dynamic';\nconst runtime = 'nodejs'; // Force Node.js runtime\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_2__.PrismaClient();\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user) {\n                    return null;\n                }\n                const isPasswordValid = await bcrypt__WEBPACK_IMPORTED_MODULE_3__.compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    name: user.name,\n                    email: user.email,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                return {\n                    ...token,\n                    id: user.id,\n                    role: user.role\n                };\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            return {\n                ...session,\n                user: {\n                    ...session.user,\n                    id: token.id,\n                    role: token.role\n                }\n            };\n        }\n    },\n    pages: {\n        signIn: \"/login\"\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\nconst handler = (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(authOptions);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUNzQztBQUM0QjtBQUNwQjtBQUNYO0FBRW5DLHlFQUF5RTtBQUNsRSxNQUFNSSxVQUFVLGdCQUFnQjtBQUNoQyxNQUFNQyxVQUFVLFNBQVMsQ0FBQyx3QkFBd0I7QUFFekQsTUFBTUMsU0FBUyxJQUFJSix3REFBWUE7QUF1QnhCLE1BQU1LLGNBQStCO0lBQzFDQyxXQUFXO1FBQ1RQLDJFQUFtQkEsQ0FBQztZQUNsQlEsTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFNO2dCQUFRO2dCQUN2Q0MsVUFBVTtvQkFBRUYsT0FBTztvQkFBWUMsTUFBTTtnQkFBVztZQUNsRDtZQUNBLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxDQUFDRCxhQUFhSSxVQUFVO29CQUNqRCxPQUFPO2dCQUNUO2dCQUVBLE1BQU1FLE9BQU8sTUFBTVYsT0FBT1UsSUFBSSxDQUFDQyxVQUFVLENBQUM7b0JBQ3hDQyxPQUFPO3dCQUNMUCxPQUFPRCxZQUFZQyxLQUFLO29CQUMxQjtnQkFDRjtnQkFFQSxJQUFJLENBQUNLLE1BQU07b0JBQ1QsT0FBTztnQkFDVDtnQkFFQSxNQUFNRyxrQkFBa0IsTUFBTWhCLDJDQUFnQixDQUM1Q08sWUFBWUksUUFBUSxFQUNwQkUsS0FBS0YsUUFBUTtnQkFHZixJQUFJLENBQUNLLGlCQUFpQjtvQkFDcEIsT0FBTztnQkFDVDtnQkFFQSxPQUFPO29CQUNMRSxJQUFJTCxLQUFLSyxFQUFFO29CQUNYWixNQUFNTyxLQUFLUCxJQUFJO29CQUNmRSxPQUFPSyxLQUFLTCxLQUFLO29CQUNqQlcsTUFBTU4sS0FBS00sSUFBSTtnQkFDakI7WUFDRjtRQUNGO0tBQ0Q7SUFDREMsV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsS0FBSyxFQUFFVCxJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUixPQUFPO29CQUNMLEdBQUdTLEtBQUs7b0JBQ1JKLElBQUlMLEtBQUtLLEVBQUU7b0JBQ1hDLE1BQU1OLEtBQUtNLElBQUk7Z0JBQ2pCO1lBQ0Y7WUFDQSxPQUFPRztRQUNUO1FBQ0EsTUFBTUMsU0FBUSxFQUFFQSxPQUFPLEVBQUVELEtBQUssRUFBRTtZQUM5QixPQUFPO2dCQUNMLEdBQUdDLE9BQU87Z0JBQ1ZWLE1BQU07b0JBQ0osR0FBR1UsUUFBUVYsSUFBSTtvQkFDZkssSUFBSUksTUFBTUosRUFBRTtvQkFDWkMsTUFBTUcsTUFBTUgsSUFBSTtnQkFDbEI7WUFDRjtRQUNGO0lBQ0Y7SUFDQUssT0FBTztRQUNMQyxRQUFRO0lBQ1Y7SUFDQUYsU0FBUztRQUNQRyxVQUFVO0lBQ1o7SUFDQUMsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO0FBQ3JDLEVBQUU7QUFFRixNQUFNQyxVQUFVbEMsMERBQVFBLENBQUNPO0FBRWtCIiwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXG5vcmR2aWtcXG5vcmR2aWtfcGFuZWxcXGFwcFxcYXBpXFxhdXRoXFxbLi4ubmV4dGF1dGhdXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aC9uZXh0XCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBiY3J5cHRqcyBmcm9tIFwiYmNyeXB0XCI7XG5cbi8vIE1hcmsgdGhpcyBmaWxlIGFzIHNlcnZlci1vbmx5IC0gd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gY2xpZW50IGJ1bmRsZXNcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJzsgLy8gRm9yY2UgTm9kZS5qcyBydW50aW1lXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuLy8gRXh0ZW5kIHRoZSBkZWZhdWx0IHNlc3Npb24gYW5kIHVzZXIgdHlwZXNcbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoXCIge1xuICBpbnRlcmZhY2UgU2Vzc2lvbiB7XG4gICAgdXNlcjoge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIG5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgaW1hZ2U/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgcm9sZT86IHN0cmluZyB8IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJmYWNlIFVzZXIge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICAgIGltYWdlPzogc3RyaW5nIHwgbnVsbDtcbiAgICByb2xlPzogc3RyaW5nIHwgbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiBcImNyZWRlbnRpYWxzXCIsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiIH0sXG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0anMuY29tcGFyZShcbiAgICAgICAgICBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgICAgICB1c2VyLnBhc3N3b3JkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSBhcyBzdHJpbmcsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0pLFxuICBdLFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnRva2VuLFxuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgIGlkOiB0b2tlbi5pZCxcbiAgICAgICAgICByb2xlOiB0b2tlbi5yb2xlLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvbG9naW5cIixcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG5cbmNvbnN0IGhhbmRsZXIgPSBOZXh0QXV0aChhdXRoT3B0aW9ucyk7XG5cbmV4cG9ydCB7IGhhbmRsZXIgYXMgR0VULCBoYW5kbGVyIGFzIFBPU1QgfTtcbiJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJQcmlzbWFDbGllbnQiLCJiY3J5cHRqcyIsImR5bmFtaWMiLCJydW50aW1lIiwicHJpc21hIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJpZCIsInJvbGUiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInNlc3Npb24iLCJwYWdlcyIsInNpZ25JbiIsInN0cmF0ZWd5Iiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsImhhbmRsZXIiLCJHRVQiLCJQT1NUIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/nodes/[id]/route.ts":
/*!*************************************!*\
  !*** ./app/api/nodes/[id]/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/api/auth/[...nextauth]/route */ \"(rsc)/./app/api/auth/[...nextauth]/route.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n\n\n\n\n// GET /api/nodes/[id] - Get a specific node\nasync function GET(request, context) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { id } = context.params;\n        // Get node with server count\n        const node = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.findUnique({\n            where: {\n                id\n            },\n            include: {\n                _count: {\n                    select: {\n                        servers: true\n                    }\n                }\n            }\n        });\n        if (!node) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Node not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Remove password from response\n        const { password, ...nodeWithoutPassword } = node;\n        // Fetch real stats from the node's health endpoint\n        let nodeStats = {\n            cpuUsage: 0,\n            ramUsage: 0,\n            diskUsage: 0,\n            uptime: \"Unknown\"\n        };\n        // Initialize system info with default values\n        let systemInfo = {\n            cpuModel: \"Unknown\",\n            cpuCores: 0,\n            cpuSpeed: 0,\n            ramTotal: 0,\n            diskTotal: 0,\n            diskFree: 0,\n            platform: \"Unknown\",\n            architecture: \"Unknown\"\n        };\n        // Initialize SteamCMD configuration\n        let steamCmdConfig = {\n            steamCmdPath: \"Unknown\",\n            installDir: \"Unknown\",\n            isInstalled: false,\n            platform: \"Unknown\"\n        };\n        try {\n            // Prepare authentication headers\n            const headers = {\n                'Content-Type': 'application/json',\n                'X-API-Key': node.uid // Use node UID as API key for authentication\n            };\n            // Try the system health endpoint - this has all the metrics we need\n            const url = `http://${node.ipAddress}:${node.port}/api/system/health`;\n            console.log(`Checking node health at ${url}`);\n            const response = await fetch(url, {\n                method: 'GET',\n                headers,\n                cache: 'no-store',\n                signal: AbortSignal.timeout(5000)\n            }).catch((err)=>{\n                console.log(`Error fetching from ${url}:`, err.message);\n                return null;\n            });\n            // Default status is OFFLINE until we confirm it's online\n            let status = \"OFFLINE\";\n            if (response && response.ok) {\n                const healthData = await response.json();\n                console.log(\"Health data response:\", JSON.stringify(healthData, null, 2));\n                // Get metrics directly from the health response\n                if (healthData && healthData.metrics) {\n                    // Extract CPU, RAM and disk usage from metrics object\n                    nodeStats.cpuUsage = parseFloat(healthData.metrics.cpu?.usage) || 0;\n                    nodeStats.ramUsage = parseFloat(healthData.metrics.memory?.usedPercentage) || 0;\n                    nodeStats.diskUsage = parseFloat(healthData.metrics.disk?.usedPercentage) || 0;\n                    // Format node uptime using nodeUptime from system object\n                    const uptimeSeconds = healthData.system?.nodeUptime || 0;\n                    if (uptimeSeconds > 0) {\n                        const days = Math.floor(uptimeSeconds / (3600 * 24));\n                        const hours = Math.floor(uptimeSeconds % (3600 * 24) / 3600);\n                        const minutes = Math.floor(uptimeSeconds % 3600 / 60);\n                        nodeStats.uptime = `${days} days, ${hours} hours, ${minutes} minutes`;\n                    }\n                    // Update node status to ONLINE since we got a successful response\n                    status = \"ONLINE\";\n                }\n                // Update node status\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        status\n                    }\n                });\n                // Try to get detailed system information\n                try {\n                    const osUrl = `http://${node.ipAddress}:${node.port}/api/system/os`;\n                    const osResponse = await fetch(osUrl, {\n                        method: 'GET',\n                        headers,\n                        cache: 'no-store',\n                        signal: AbortSignal.timeout(5000)\n                    });\n                    if (osResponse && osResponse.ok) {\n                        const osData = await osResponse.json();\n                        // Extract system information\n                        if (osData) {\n                            // Get CPU information\n                            if (osData.cpus && osData.cpus.length > 0) {\n                                systemInfo.cpuModel = osData.cpus[0].model || \"Unknown\";\n                                systemInfo.cpuCores = osData.cpus.length || 0;\n                                systemInfo.cpuSpeed = osData.cpus[0].speed || 0;\n                            }\n                            // Get RAM information\n                            if (osData.totalmem) {\n                                systemInfo.ramTotal = Math.round(osData.totalmem / (1024 * 1024)); // Convert to MB\n                            }\n                            // Get platform and architecture\n                            systemInfo.platform = osData.platform || \"Unknown\";\n                            systemInfo.architecture = osData.arch || \"Unknown\";\n                        }\n                    }\n                } catch (osError) {\n                    console.error('Error fetching system OS data:', osError);\n                }\n                // Try to get disk information\n                try {\n                    const metricsUrl = `http://${node.ipAddress}:${node.port}/api/system/metrics`;\n                    console.log(`Fetching metrics from: ${metricsUrl}`);\n                    const metricsResponse = await fetch(metricsUrl, {\n                        method: 'GET',\n                        headers,\n                        cache: 'no-store',\n                        signal: AbortSignal.timeout(5000)\n                    });\n                    if (metricsResponse && metricsResponse.ok) {\n                        const metricsData = await metricsResponse.json();\n                        console.log('Metrics data received:', JSON.stringify(metricsData, null, 2));\n                        // Extract disk information\n                        if (metricsData && metricsData.disk) {\n                            // The disk values are already in GB from the node-app, no need to convert\n                            systemInfo.diskTotal = Math.round(metricsData.disk.total) || 0;\n                            systemInfo.diskFree = Math.round(metricsData.disk.free) || 0;\n                            console.log('Disk metrics data:', JSON.stringify(metricsData.disk, null, 2));\n                            console.log(`Processed disk info - Total: ${systemInfo.diskTotal} GB, Free: ${systemInfo.diskFree} GB`);\n                        } else {\n                            console.log('No disk data found in metrics response');\n                        }\n                    } else {\n                        console.log(`Failed to fetch metrics: ${metricsResponse?.status} ${metricsResponse?.statusText}`);\n                    }\n                } catch (metricsError) {\n                    console.error('Error fetching system metrics data:', metricsError);\n                }\n                // Try to get SteamCMD configuration\n                try {\n                    const steamCmdUrl = `http://${node.ipAddress}:${node.port}/api/system/steamcmd/status`;\n                    console.log(`Fetching SteamCMD status from: ${steamCmdUrl}`);\n                    const steamCmdResponse = await fetch(steamCmdUrl, {\n                        method: 'GET',\n                        headers,\n                        cache: 'no-store',\n                        signal: AbortSignal.timeout(5000)\n                    });\n                    if (steamCmdResponse && steamCmdResponse.ok) {\n                        const steamCmdData = await steamCmdResponse.json();\n                        console.log('SteamCMD status received:', JSON.stringify(steamCmdData, null, 2));\n                        steamCmdConfig.steamCmdPath = steamCmdData.steamCmdPath || \"Unknown\";\n                        steamCmdConfig.installDir = steamCmdData.installDir || \"Unknown\";\n                        steamCmdConfig.isInstalled = steamCmdData.isInstalled || false;\n                        steamCmdConfig.platform = steamCmdData.platform || \"Unknown\";\n                    } else {\n                        console.log(`Failed to fetch SteamCMD status: ${steamCmdResponse?.status} ${steamCmdResponse?.statusText}`);\n                    }\n                } catch (steamCmdError) {\n                    console.error('Error fetching SteamCMD configuration:', steamCmdError);\n                }\n            } else {\n                // Update node status to OFFLINE since the request failed\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        status: 'OFFLINE'\n                    }\n                });\n            }\n        } catch (error) {\n            console.error('Error fetching node health data:', error);\n            // Update node status to OFFLINE due to error\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                where: {\n                    id\n                },\n                data: {\n                    status: 'OFFLINE'\n                }\n            });\n        }\n        const nodeWithStats = {\n            ...nodeWithoutPassword,\n            stats: nodeStats,\n            systemInfo,\n            steamCmdConfig\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            node: nodeWithStats\n        });\n    } catch (error) {\n        console.error(\"Error fetching node:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch node\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT /api/nodes/[id] - Update a node\nasync function PUT(request, context) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if user is admin\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].user.findUnique({\n            where: {\n                email: session.user?.email\n            }\n        });\n        if (user?.role !== \"ADMIN\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Forbidden: Admin access required\"\n            }, {\n                status: 403\n            });\n        }\n        const { id } = context.params;\n        const body = await request.json();\n        // Check if node exists\n        const existingNode = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existingNode) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Node not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Prepare update data\n        const updateData = {};\n        // Only update fields that are provided\n        if (body.name !== undefined) updateData.name = body.name;\n        if (body.os !== undefined) updateData.os = body.os;\n        if (body.ipAddress !== undefined) updateData.ipAddress = body.ipAddress;\n        if (body.port !== undefined) updateData.port = body.port;\n        if (body.username !== undefined) updateData.username = body.username;\n        if (body.password !== undefined) updateData.password = body.password;\n        if (body.description !== undefined) updateData.description = body.description;\n        if (body.status !== undefined) updateData.status = body.status;\n        // Update the node\n        const updatedNode = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n            where: {\n                id\n            },\n            data: updateData\n        });\n        // Remove password from response\n        const { password, ...nodeWithoutPassword } = updatedNode;\n        // Fetch real stats from the node's health endpoint\n        let nodeStats = {\n            cpuUsage: 0,\n            ramUsage: 0,\n            diskUsage: 0,\n            uptime: \"Unknown\"\n        };\n        try {\n            // Prepare authentication headers\n            const headers = {\n                'Content-Type': 'application/json',\n                'X-API-Key': updatedNode.uid // Use node UID as API key for authentication\n            };\n            // Try the system health endpoint - this has all the metrics we need\n            const url = `http://${updatedNode.ipAddress}:${updatedNode.port}/api/system/health`;\n            console.log(`Checking node health at ${url}`);\n            const response = await fetch(url, {\n                method: 'GET',\n                headers,\n                cache: 'no-store',\n                signal: AbortSignal.timeout(5000)\n            }).catch((err)=>{\n                console.log(`Error fetching from ${url}:`, err.message);\n                return null;\n            });\n            // Default status is OFFLINE until we confirm it's online\n            let status = \"OFFLINE\";\n            if (response && response.ok) {\n                const healthData = await response.json();\n                console.log(\"Health data response:\", JSON.stringify(healthData, null, 2));\n                // Get metrics directly from the health response\n                if (healthData && healthData.metrics) {\n                    // Extract CPU, RAM and disk usage from metrics object\n                    nodeStats.cpuUsage = parseFloat(healthData.metrics.cpu?.usage) || 0;\n                    nodeStats.ramUsage = parseFloat(healthData.metrics.memory?.usedPercentage) || 0;\n                    nodeStats.diskUsage = parseFloat(healthData.metrics.disk?.usedPercentage) || 0;\n                    // Format node uptime using nodeUptime from system object\n                    const uptimeSeconds = healthData.system?.nodeUptime || 0;\n                    if (uptimeSeconds > 0) {\n                        const days = Math.floor(uptimeSeconds / (3600 * 24));\n                        const hours = Math.floor(uptimeSeconds % (3600 * 24) / 3600);\n                        const minutes = Math.floor(uptimeSeconds % 3600 / 60);\n                        nodeStats.uptime = `${days} days, ${hours} hours, ${minutes} minutes`;\n                    }\n                    // Update node status to ONLINE since we got a successful response\n                    status = \"ONLINE\";\n                }\n                // Update node status\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        status\n                    }\n                });\n            } else {\n                // Update node status to OFFLINE since the request failed\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        status: 'OFFLINE'\n                    }\n                });\n            }\n        } catch (error) {\n            console.error('Error fetching node health data:', error);\n            // Update node status to OFFLINE due to error\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.update({\n                where: {\n                    id\n                },\n                data: {\n                    status: 'OFFLINE'\n                }\n            });\n        }\n        const nodeWithStats = {\n            ...nodeWithoutPassword,\n            stats: nodeStats\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            node: nodeWithStats,\n            message: \"Node updated successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error updating node:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update node\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE /api/nodes/[id] - Delete a node\nasync function DELETE(request, context) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if user is admin\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].user.findUnique({\n            where: {\n                email: session.user?.email\n            }\n        });\n        if (user?.role !== \"ADMIN\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Forbidden: Admin access required\"\n            }, {\n                status: 403\n            });\n        }\n        const { id } = context.params;\n        // Check if node exists\n        const existingNode = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.findUnique({\n            where: {\n                id\n            },\n            include: {\n                _count: {\n                    select: {\n                        servers: true\n                    }\n                }\n            }\n        });\n        if (!existingNode) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Node not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Check if node has servers\n        if (existingNode._count.servers > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cannot delete node with active servers. Please delete or move servers first.\"\n            }, {\n                status: 400\n            });\n        }\n        // Delete the node\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].node.delete({\n            where: {\n                id\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Node deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error deleting node:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete node\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sR0FBRyxHQUFHO1lBQ25DLE9BQU9uQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUErRSxHQUN4RjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsa0JBQWtCO1FBQ2xCLE1BQU1QLG1EQUFNQSxDQUFDVSxJQUFJLENBQUN1RyxNQUFNLENBQUM7WUFDdkJyRyxPQUFPO2dCQUFFSjtZQUFHO1FBQ2Q7UUFFQSxPQUFPWCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQ3ZCZ0QsU0FBUztRQUNYO0lBQ0YsRUFBRSxPQUFPL0MsT0FBTztRQUNkb0MsUUFBUXBDLEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU9ULHFEQUFZQSxDQUFDUSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcbm9yZHZpa1xcbm9yZHZpa19wYW5lbFxcYXBwXFxhcGlcXG5vZGVzXFxbaWRdXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tIFwiQC9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiO1xuaW1wb3J0IHByaXNtYSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5cbi8vIEdFVCAvYXBpL25vZGVzL1tpZF0gLSBHZXQgYSBzcGVjaWZpYyBub2RlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgY29udGV4dDogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZCB9ID0gY29udGV4dC5wYXJhbXM7XG5cbiAgICAvLyBHZXQgbm9kZSB3aXRoIHNlcnZlciBjb3VudFxuICAgIGNvbnN0IG5vZGUgPSBhd2FpdCBwcmlzbWEubm9kZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBzZXJ2ZXJzOiB0cnVlIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiTm9kZSBub3QgZm91bmRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHBhc3N3b3JkIGZyb20gcmVzcG9uc2VcbiAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi5ub2RlV2l0aG91dFBhc3N3b3JkIH0gPSBub2RlO1xuXG4gICAgLy8gRmV0Y2ggcmVhbCBzdGF0cyBmcm9tIHRoZSBub2RlJ3MgaGVhbHRoIGVuZHBvaW50XG4gICAgbGV0IG5vZGVTdGF0cyA9IHtcbiAgICAgIGNwdVVzYWdlOiAwLFxuICAgICAgcmFtVXNhZ2U6IDAsXG4gICAgICBkaXNrVXNhZ2U6IDAsXG4gICAgICB1cHRpbWU6IFwiVW5rbm93blwiXG4gICAgfTtcblxuICAgIC8vIEluaXRpYWxpemUgc3lzdGVtIGluZm8gd2l0aCBkZWZhdWx0IHZhbHVlc1xuICAgIGxldCBzeXN0ZW1JbmZvID0ge1xuICAgICAgY3B1TW9kZWw6IFwiVW5rbm93blwiLFxuICAgICAgY3B1Q29yZXM6IDAsXG4gICAgICBjcHVTcGVlZDogMCxcbiAgICAgIHJhbVRvdGFsOiAwLFxuICAgICAgZGlza1RvdGFsOiAwLFxuICAgICAgZGlza0ZyZWU6IDAsXG4gICAgICBwbGF0Zm9ybTogXCJVbmtub3duXCIsXG4gICAgICBhcmNoaXRlY3R1cmU6IFwiVW5rbm93blwiXG4gICAgfTtcblxuICAgIC8vIEluaXRpYWxpemUgU3RlYW1DTUQgY29uZmlndXJhdGlvblxuICAgIGxldCBzdGVhbUNtZENvbmZpZyA9IHtcbiAgICAgIHN0ZWFtQ21kUGF0aDogXCJVbmtub3duXCIsXG4gICAgICBpbnN0YWxsRGlyOiBcIlVua25vd25cIixcbiAgICAgIGlzSW5zdGFsbGVkOiBmYWxzZSxcbiAgICAgIHBsYXRmb3JtOiBcIlVua25vd25cIlxuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlcGFyZSBhdXRoZW50aWNhdGlvbiBoZWFkZXJzXG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnWC1BUEktS2V5Jzogbm9kZS51aWQgLy8gVXNlIG5vZGUgVUlEIGFzIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICB9O1xuXG4gICAgICAvLyBUcnkgdGhlIHN5c3RlbSBoZWFsdGggZW5kcG9pbnQgLSB0aGlzIGhhcyBhbGwgdGhlIG1ldHJpY3Mgd2UgbmVlZFxuICAgICAgY29uc3QgdXJsID0gYGh0dHA6Ly8ke25vZGUuaXBBZGRyZXNzfToke25vZGUucG9ydH0vYXBpL3N5c3RlbS9oZWFsdGhgO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgQ2hlY2tpbmcgbm9kZSBoZWFsdGggYXQgJHt1cmx9YCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGNhY2hlOiAnbm8tc3RvcmUnLFxuICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoNTAwMClcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBmZXRjaGluZyBmcm9tICR7dXJsfTpgLCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIERlZmF1bHQgc3RhdHVzIGlzIE9GRkxJTkUgdW50aWwgd2UgY29uZmlybSBpdCdzIG9ubGluZVxuICAgICAgbGV0IHN0YXR1cyA9IFwiT0ZGTElORVwiO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgaGVhbHRoRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSGVhbHRoIGRhdGEgcmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KGhlYWx0aERhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBtZXRyaWNzIGRpcmVjdGx5IGZyb20gdGhlIGhlYWx0aCByZXNwb25zZVxuICAgICAgICBpZiAoaGVhbHRoRGF0YSAmJiBoZWFsdGhEYXRhLm1ldHJpY3MpIHtcbiAgICAgICAgICAvLyBFeHRyYWN0IENQVSwgUkFNIGFuZCBkaXNrIHVzYWdlIGZyb20gbWV0cmljcyBvYmplY3RcbiAgICAgICAgICBub2RlU3RhdHMuY3B1VXNhZ2UgPSBwYXJzZUZsb2F0KGhlYWx0aERhdGEubWV0cmljcy5jcHU/LnVzYWdlKSB8fCAwO1xuICAgICAgICAgIG5vZGVTdGF0cy5yYW1Vc2FnZSA9IHBhcnNlRmxvYXQoaGVhbHRoRGF0YS5tZXRyaWNzLm1lbW9yeT8udXNlZFBlcmNlbnRhZ2UpIHx8IDA7XG4gICAgICAgICAgbm9kZVN0YXRzLmRpc2tVc2FnZSA9IHBhcnNlRmxvYXQoaGVhbHRoRGF0YS5tZXRyaWNzLmRpc2s/LnVzZWRQZXJjZW50YWdlKSB8fCAwO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvcm1hdCBub2RlIHVwdGltZSB1c2luZyBub2RlVXB0aW1lIGZyb20gc3lzdGVtIG9iamVjdFxuICAgICAgICAgIGNvbnN0IHVwdGltZVNlY29uZHMgPSBoZWFsdGhEYXRhLnN5c3RlbT8ubm9kZVVwdGltZSB8fCAwO1xuICAgICAgICAgIGlmICh1cHRpbWVTZWNvbmRzID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IodXB0aW1lU2Vjb25kcyAvICgzNjAwICogMjQpKTtcbiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigodXB0aW1lU2Vjb25kcyAlICgzNjAwICogMjQpKSAvIDM2MDApO1xuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHVwdGltZVNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgICAgIG5vZGVTdGF0cy51cHRpbWUgPSBgJHtkYXlzfSBkYXlzLCAke2hvdXJzfSBob3VycywgJHttaW51dGVzfSBtaW51dGVzYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzIHRvIE9OTElORSBzaW5jZSB3ZSBnb3QgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICAgICAgc3RhdHVzID0gXCJPTkxJTkVcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzXG4gICAgICAgIGF3YWl0IHByaXNtYS5ub2RlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1cyB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUcnkgdG8gZ2V0IGRldGFpbGVkIHN5c3RlbSBpbmZvcm1hdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG9zVXJsID0gYGh0dHA6Ly8ke25vZGUuaXBBZGRyZXNzfToke25vZGUucG9ydH0vYXBpL3N5c3RlbS9vc2A7XG4gICAgICAgICAgY29uc3Qgb3NSZXNwb25zZSA9IGF3YWl0IGZldGNoKG9zVXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGNhY2hlOiAnbm8tc3RvcmUnLFxuICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDUwMDApXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAob3NSZXNwb25zZSAmJiBvc1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBvc0RhdGEgPSBhd2FpdCBvc1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFjdCBzeXN0ZW0gaW5mb3JtYXRpb25cbiAgICAgICAgICAgIGlmIChvc0RhdGEpIHtcbiAgICAgICAgICAgICAgLy8gR2V0IENQVSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgICBpZiAob3NEYXRhLmNwdXMgJiYgb3NEYXRhLmNwdXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHN5c3RlbUluZm8uY3B1TW9kZWwgPSBvc0RhdGEuY3B1c1swXS5tb2RlbCB8fCBcIlVua25vd25cIjtcbiAgICAgICAgICAgICAgICBzeXN0ZW1JbmZvLmNwdUNvcmVzID0gb3NEYXRhLmNwdXMubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICAgICAgc3lzdGVtSW5mby5jcHVTcGVlZCA9IG9zRGF0YS5jcHVzWzBdLnNwZWVkIHx8IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEdldCBSQU0gaW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgaWYgKG9zRGF0YS50b3RhbG1lbSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbUluZm8ucmFtVG90YWwgPSBNYXRoLnJvdW5kKG9zRGF0YS50b3RhbG1lbSAvICgxMDI0ICogMTAyNCkpOyAvLyBDb252ZXJ0IHRvIE1CXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEdldCBwbGF0Zm9ybSBhbmQgYXJjaGl0ZWN0dXJlXG4gICAgICAgICAgICAgIHN5c3RlbUluZm8ucGxhdGZvcm0gPSBvc0RhdGEucGxhdGZvcm0gfHwgXCJVbmtub3duXCI7XG4gICAgICAgICAgICAgIHN5c3RlbUluZm8uYXJjaGl0ZWN0dXJlID0gb3NEYXRhLmFyY2ggfHwgXCJVbmtub3duXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChvc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3lzdGVtIE9TIGRhdGE6Jywgb3NFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgdG8gZ2V0IGRpc2sgaW5mb3JtYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBtZXRyaWNzVXJsID0gYGh0dHA6Ly8ke25vZGUuaXBBZGRyZXNzfToke25vZGUucG9ydH0vYXBpL3N5c3RlbS9tZXRyaWNzYDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgbWV0cmljcyBmcm9tOiAke21ldHJpY3NVcmx9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbWV0cmljc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2gobWV0cmljc1VybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJyxcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKG1ldHJpY3NSZXNwb25zZSAmJiBtZXRyaWNzUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldHJpY3NEYXRhID0gYXdhaXQgbWV0cmljc1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXRyaWNzIGRhdGEgcmVjZWl2ZWQ6JywgSlNPTi5zdHJpbmdpZnkobWV0cmljc0RhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFjdCBkaXNrIGluZm9ybWF0aW9uXG4gICAgICAgICAgICBpZiAobWV0cmljc0RhdGEgJiYgbWV0cmljc0RhdGEuZGlzaykge1xuICAgICAgICAgICAgICAvLyBUaGUgZGlzayB2YWx1ZXMgYXJlIGFscmVhZHkgaW4gR0IgZnJvbSB0aGUgbm9kZS1hcHAsIG5vIG5lZWQgdG8gY29udmVydFxuICAgICAgICAgICAgICBzeXN0ZW1JbmZvLmRpc2tUb3RhbCA9IE1hdGgucm91bmQobWV0cmljc0RhdGEuZGlzay50b3RhbCkgfHwgMDtcbiAgICAgICAgICAgICAgc3lzdGVtSW5mby5kaXNrRnJlZSA9IE1hdGgucm91bmQobWV0cmljc0RhdGEuZGlzay5mcmVlKSB8fCAwO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Rpc2sgbWV0cmljcyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KG1ldHJpY3NEYXRhLmRpc2ssIG51bGwsIDIpKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NlZCBkaXNrIGluZm8gLSBUb3RhbDogJHtzeXN0ZW1JbmZvLmRpc2tUb3RhbH0gR0IsIEZyZWU6ICR7c3lzdGVtSW5mby5kaXNrRnJlZX0gR0JgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBkaXNrIGRhdGEgZm91bmQgaW4gbWV0cmljcyByZXNwb25zZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRmFpbGVkIHRvIGZldGNoIG1ldHJpY3M6ICR7bWV0cmljc1Jlc3BvbnNlPy5zdGF0dXN9ICR7bWV0cmljc1Jlc3BvbnNlPy5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAobWV0cmljc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3lzdGVtIG1ldHJpY3MgZGF0YTonLCBtZXRyaWNzRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJ5IHRvIGdldCBTdGVhbUNNRCBjb25maWd1cmF0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc3RlYW1DbWRVcmwgPSBgaHR0cDovLyR7bm9kZS5pcEFkZHJlc3N9OiR7bm9kZS5wb3J0fS9hcGkvc3lzdGVtL3N0ZWFtY21kL3N0YXR1c2A7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZldGNoaW5nIFN0ZWFtQ01EIHN0YXR1cyBmcm9tOiAke3N0ZWFtQ21kVXJsfWApO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHN0ZWFtQ21kUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzdGVhbUNtZFVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJyxcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHN0ZWFtQ21kUmVzcG9uc2UgJiYgc3RlYW1DbWRSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3Qgc3RlYW1DbWREYXRhID0gYXdhaXQgc3RlYW1DbWRSZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3RlYW1DTUQgc3RhdHVzIHJlY2VpdmVkOicsIEpTT04uc3RyaW5naWZ5KHN0ZWFtQ21kRGF0YSwgbnVsbCwgMikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdGVhbUNtZENvbmZpZy5zdGVhbUNtZFBhdGggPSBzdGVhbUNtZERhdGEuc3RlYW1DbWRQYXRoIHx8IFwiVW5rbm93blwiO1xuICAgICAgICAgICAgc3RlYW1DbWRDb25maWcuaW5zdGFsbERpciA9IHN0ZWFtQ21kRGF0YS5pbnN0YWxsRGlyIHx8IFwiVW5rbm93blwiO1xuICAgICAgICAgICAgc3RlYW1DbWRDb25maWcuaXNJbnN0YWxsZWQgPSBzdGVhbUNtZERhdGEuaXNJbnN0YWxsZWQgfHwgZmFsc2U7XG4gICAgICAgICAgICBzdGVhbUNtZENvbmZpZy5wbGF0Zm9ybSA9IHN0ZWFtQ21kRGF0YS5wbGF0Zm9ybSB8fCBcIlVua25vd25cIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEZhaWxlZCB0byBmZXRjaCBTdGVhbUNNRCBzdGF0dXM6ICR7c3RlYW1DbWRSZXNwb25zZT8uc3RhdHVzfSAke3N0ZWFtQ21kUmVzcG9uc2U/LnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChzdGVhbUNtZEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgU3RlYW1DTUQgY29uZmlndXJhdGlvbjonLCBzdGVhbUNtZEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzIHRvIE9GRkxJTkUgc2luY2UgdGhlIHJlcXVlc3QgZmFpbGVkXG4gICAgICAgIGF3YWl0IHByaXNtYS5ub2RlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkxJTkUnIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vZGUgaGVhbHRoIGRhdGE6JywgZXJyb3IpO1xuICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzIHRvIE9GRkxJTkUgZHVlIHRvIGVycm9yXG4gICAgICBhd2FpdCBwcmlzbWEubm9kZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkxJTkUnIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVXaXRoU3RhdHMgPSB7XG4gICAgICAuLi5ub2RlV2l0aG91dFBhc3N3b3JkLFxuICAgICAgc3RhdHM6IG5vZGVTdGF0cyxcbiAgICAgIHN5c3RlbUluZm8sXG4gICAgICBzdGVhbUNtZENvbmZpZ1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBub2RlOiBub2RlV2l0aFN0YXRzIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBub2RlOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gZmV0Y2ggbm9kZVwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBVVCAvYXBpL25vZGVzL1tpZF0gLSBVcGRhdGUgYSBub2RlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgY29udGV4dDogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiBzZXNzaW9uLnVzZXI/LmVtYWlsIGFzIHN0cmluZyB9LFxuICAgIH0pO1xuXG4gICAgaWYgKHVzZXI/LnJvbGUgIT09IFwiQURNSU5cIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkZvcmJpZGRlbjogQWRtaW4gYWNjZXNzIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWQgfSA9IGNvbnRleHQucGFyYW1zO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBub2RlIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nTm9kZSA9IGF3YWl0IHByaXNtYS5ub2RlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghZXhpc3RpbmdOb2RlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiTm9kZSBub3QgZm91bmRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSB1cGRhdGUgZGF0YVxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHt9O1xuICAgIFxuICAgIC8vIE9ubHkgdXBkYXRlIGZpZWxkcyB0aGF0IGFyZSBwcm92aWRlZFxuICAgIGlmIChib2R5Lm5hbWUgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5uYW1lID0gYm9keS5uYW1lO1xuICAgIGlmIChib2R5Lm9zICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEub3MgPSBib2R5Lm9zO1xuICAgIGlmIChib2R5LmlwQWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmlwQWRkcmVzcyA9IGJvZHkuaXBBZGRyZXNzO1xuICAgIGlmIChib2R5LnBvcnQgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5wb3J0ID0gYm9keS5wb3J0O1xuICAgIGlmIChib2R5LnVzZXJuYW1lICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEudXNlcm5hbWUgPSBib2R5LnVzZXJuYW1lO1xuICAgIGlmIChib2R5LnBhc3N3b3JkICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEucGFzc3dvcmQgPSBib2R5LnBhc3N3b3JkO1xuICAgIGlmIChib2R5LmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSBib2R5LmRlc2NyaXB0aW9uO1xuICAgIGlmIChib2R5LnN0YXR1cyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnN0YXR1cyA9IGJvZHkuc3RhdHVzO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBub2RlXG4gICAgY29uc3QgdXBkYXRlZE5vZGUgPSBhd2FpdCBwcmlzbWEubm9kZS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGE6IHVwZGF0ZURhdGEsXG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgcGFzc3dvcmQgZnJvbSByZXNwb25zZVxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLm5vZGVXaXRob3V0UGFzc3dvcmQgfSA9IHVwZGF0ZWROb2RlO1xuXG4gICAgLy8gRmV0Y2ggcmVhbCBzdGF0cyBmcm9tIHRoZSBub2RlJ3MgaGVhbHRoIGVuZHBvaW50XG4gICAgbGV0IG5vZGVTdGF0cyA9IHtcbiAgICAgIGNwdVVzYWdlOiAwLFxuICAgICAgcmFtVXNhZ2U6IDAsXG4gICAgICBkaXNrVXNhZ2U6IDAsXG4gICAgICB1cHRpbWU6IFwiVW5rbm93blwiXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBQcmVwYXJlIGF1dGhlbnRpY2F0aW9uIGhlYWRlcnNcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdYLUFQSS1LZXknOiB1cGRhdGVkTm9kZS51aWQgLy8gVXNlIG5vZGUgVUlEIGFzIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICB9O1xuXG4gICAgICAvLyBUcnkgdGhlIHN5c3RlbSBoZWFsdGggZW5kcG9pbnQgLSB0aGlzIGhhcyBhbGwgdGhlIG1ldHJpY3Mgd2UgbmVlZFxuICAgICAgY29uc3QgdXJsID0gYGh0dHA6Ly8ke3VwZGF0ZWROb2RlLmlwQWRkcmVzc306JHt1cGRhdGVkTm9kZS5wb3J0fS9hcGkvc3lzdGVtL2hlYWx0aGA7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBDaGVja2luZyBub2RlIGhlYWx0aCBhdCAke3VybH1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgY2FjaGU6ICduby1zdG9yZScsXG4gICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGZldGNoaW5nIGZyb20gJHt1cmx9OmAsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRGVmYXVsdCBzdGF0dXMgaXMgT0ZGTElORSB1bnRpbCB3ZSBjb25maXJtIGl0J3Mgb25saW5lXG4gICAgICBsZXQgc3RhdHVzID0gXCJPRkZMSU5FXCI7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBoZWFsdGhEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJIZWFsdGggZGF0YSByZXNwb25zZTpcIiwgSlNPTi5zdHJpbmdpZnkoaGVhbHRoRGF0YSwgbnVsbCwgMikpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IG1ldHJpY3MgZGlyZWN0bHkgZnJvbSB0aGUgaGVhbHRoIHJlc3BvbnNlXG4gICAgICAgIGlmIChoZWFsdGhEYXRhICYmIGhlYWx0aERhdGEubWV0cmljcykge1xuICAgICAgICAgIC8vIEV4dHJhY3QgQ1BVLCBSQU0gYW5kIGRpc2sgdXNhZ2UgZnJvbSBtZXRyaWNzIG9iamVjdFxuICAgICAgICAgIG5vZGVTdGF0cy5jcHVVc2FnZSA9IHBhcnNlRmxvYXQoaGVhbHRoRGF0YS5tZXRyaWNzLmNwdT8udXNhZ2UpIHx8IDA7XG4gICAgICAgICAgbm9kZVN0YXRzLnJhbVVzYWdlID0gcGFyc2VGbG9hdChoZWFsdGhEYXRhLm1ldHJpY3MubWVtb3J5Py51c2VkUGVyY2VudGFnZSkgfHwgMDtcbiAgICAgICAgICBub2RlU3RhdHMuZGlza1VzYWdlID0gcGFyc2VGbG9hdChoZWFsdGhEYXRhLm1ldHJpY3MuZGlzaz8udXNlZFBlcmNlbnRhZ2UpIHx8IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9ybWF0IG5vZGUgdXB0aW1lIHVzaW5nIG5vZGVVcHRpbWUgZnJvbSBzeXN0ZW0gb2JqZWN0XG4gICAgICAgICAgY29uc3QgdXB0aW1lU2Vjb25kcyA9IGhlYWx0aERhdGEuc3lzdGVtPy5ub2RlVXB0aW1lIHx8IDA7XG4gICAgICAgICAgaWYgKHVwdGltZVNlY29uZHMgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcih1cHRpbWVTZWNvbmRzIC8gKDM2MDAgKiAyNCkpO1xuICAgICAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKCh1cHRpbWVTZWNvbmRzICUgKDM2MDAgKiAyNCkpIC8gMzYwMCk7XG4gICAgICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigodXB0aW1lU2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgICAgICAgICAgbm9kZVN0YXRzLnVwdGltZSA9IGAke2RheXN9IGRheXMsICR7aG91cnN9IGhvdXJzLCAke21pbnV0ZXN9IG1pbnV0ZXNgO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgbm9kZSBzdGF0dXMgdG8gT05MSU5FIHNpbmNlIHdlIGdvdCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgICAgICBzdGF0dXMgPSBcIk9OTElORVwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgbm9kZSBzdGF0dXNcbiAgICAgICAgYXdhaXQgcHJpc21hLm5vZGUudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc3RhdHVzIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzIHRvIE9GRkxJTkUgc2luY2UgdGhlIHJlcXVlc3QgZmFpbGVkXG4gICAgICAgIGF3YWl0IHByaXNtYS5ub2RlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkxJTkUnIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5vZGUgaGVhbHRoIGRhdGE6JywgZXJyb3IpO1xuICAgICAgLy8gVXBkYXRlIG5vZGUgc3RhdHVzIHRvIE9GRkxJTkUgZHVlIHRvIGVycm9yXG4gICAgICBhd2FpdCBwcmlzbWEubm9kZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkxJTkUnIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVXaXRoU3RhdHMgPSB7XG4gICAgICAuLi5ub2RlV2l0aG91dFBhc3N3b3JkLFxuICAgICAgc3RhdHM6IG5vZGVTdGF0c1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbm9kZTogbm9kZVdpdGhTdGF0cyxcbiAgICAgIG1lc3NhZ2U6IFwiTm9kZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBub2RlOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gdXBkYXRlIG5vZGVcIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBERUxFVEUgL2FwaS9ub2Rlcy9baWRdIC0gRGVsZXRlIGEgbm9kZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIGNvbnRleHQ6IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWRtaW5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBlbWFpbDogc2Vzc2lvbi51c2VyPy5lbWFpbCBhcyBzdHJpbmcgfSxcbiAgICB9KTtcblxuICAgIGlmICh1c2VyPy5yb2xlICE9PSBcIkFETUlOXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJGb3JiaWRkZW46IEFkbWluIGFjY2VzcyByZXF1aXJlZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGlkIH0gPSBjb250ZXh0LnBhcmFtcztcbiAgICBcbiAgICAvLyBDaGVjayBpZiBub2RlIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nTm9kZSA9IGF3YWl0IHByaXNtYS5ub2RlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7IHNlcnZlcnM6IHRydWUgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWV4aXN0aW5nTm9kZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIk5vZGUgbm90IGZvdW5kXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG5vZGUgaGFzIHNlcnZlcnNcbiAgICBpZiAoZXhpc3RpbmdOb2RlLl9jb3VudC5zZXJ2ZXJzID4gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkNhbm5vdCBkZWxldGUgbm9kZSB3aXRoIGFjdGl2ZSBzZXJ2ZXJzLiBQbGVhc2UgZGVsZXRlIG9yIG1vdmUgc2VydmVycyBmaXJzdC5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIHRoZSBub2RlXG4gICAgYXdhaXQgcHJpc21hLm5vZGUuZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZTogXCJOb2RlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIG5vZGU6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBkZWxldGUgbm9kZVwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiR0VUIiwicmVxdWVzdCIsImNvbnRleHQiLCJzZXNzaW9uIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiaWQiLCJwYXJhbXMiLCJub2RlIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsIl9jb3VudCIsInNlbGVjdCIsInNlcnZlcnMiLCJwYXNzd29yZCIsIm5vZGVXaXRob3V0UGFzc3dvcmQiLCJub2RlU3RhdHMiLCJjcHVVc2FnZSIsInJhbVVzYWdlIiwiZGlza1VzYWdlIiwidXB0aW1lIiwic3lzdGVtSW5mbyIsImNwdU1vZGVsIiwiY3B1Q29yZXMiLCJjcHVTcGVlZCIsInJhbVRvdGFsIiwiZGlza1RvdGFsIiwiZGlza0ZyZWUiLCJwbGF0Zm9ybSIsImFyY2hpdGVjdHVyZSIsInN0ZWFtQ21kQ29uZmlnIiwic3RlYW1DbWRQYXRoIiwiaW5zdGFsbERpciIsImlzSW5zdGFsbGVkIiwiaGVhZGVycyIsInVpZCIsInVybCIsImlwQWRkcmVzcyIsInBvcnQiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImNhY2hlIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0IiwiY2F0Y2giLCJlcnIiLCJtZXNzYWdlIiwib2siLCJoZWFsdGhEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldHJpY3MiLCJwYXJzZUZsb2F0IiwiY3B1IiwidXNhZ2UiLCJtZW1vcnkiLCJ1c2VkUGVyY2VudGFnZSIsImRpc2siLCJ1cHRpbWVTZWNvbmRzIiwic3lzdGVtIiwibm9kZVVwdGltZSIsImRheXMiLCJNYXRoIiwiZmxvb3IiLCJob3VycyIsIm1pbnV0ZXMiLCJ1cGRhdGUiLCJkYXRhIiwib3NVcmwiLCJvc1Jlc3BvbnNlIiwib3NEYXRhIiwiY3B1cyIsImxlbmd0aCIsIm1vZGVsIiwic3BlZWQiLCJ0b3RhbG1lbSIsInJvdW5kIiwiYXJjaCIsIm9zRXJyb3IiLCJtZXRyaWNzVXJsIiwibWV0cmljc1Jlc3BvbnNlIiwibWV0cmljc0RhdGEiLCJ0b3RhbCIsImZyZWUiLCJzdGF0dXNUZXh0IiwibWV0cmljc0Vycm9yIiwic3RlYW1DbWRVcmwiLCJzdGVhbUNtZFJlc3BvbnNlIiwic3RlYW1DbWREYXRhIiwic3RlYW1DbWRFcnJvciIsIm5vZGVXaXRoU3RhdHMiLCJzdGF0cyIsIlBVVCIsInVzZXIiLCJlbWFpbCIsInJvbGUiLCJib2R5IiwiZXhpc3RpbmdOb2RlIiwidXBkYXRlRGF0YSIsIm5hbWUiLCJ1bmRlZmluZWQiLCJvcyIsInVzZXJuYW1lIiwiZGVzY3JpcHRpb24iLCJ1cGRhdGVkTm9kZSIsIkRFTEVURSIsImRlbGV0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/nodes/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Prevents multiple instances of Prisma Client in development\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5Qyw4REFBOEQ7QUFDOUQsTUFBTUMsa0JBQWtCQztBQUV4QixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUE7QUFFekQsSUFBSUksSUFBcUMsRUFBRUgsZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRXBFLGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXG5vcmR2aWtcXG5vcmR2aWtfcGFuZWxcXGxpYlxccHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLy8gUHJldmVudHMgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIFByaXNtYSBDbGllbnQgaW4gZGV2ZWxvcG1lbnRcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfTtcblxuY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xuXG5leHBvcnQgZGVmYXVsdCBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnodes%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnodes%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Projects_nordvik_nordvik_panel_app_api_nodes_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/nodes/[id]/route.ts */ \"(rsc)/./app/api/nodes/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/nodes/[id]/route\",\n        pathname: \"/api/nodes/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/nodes/[id]/route\"\n    },\n    resolvedPagePath: \"D:\\\\Projects\\\\nordvik\\\\nordvik_panel\\\\app\\\\api\\\\nodes\\\\[id]\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Projects_nordvik_nordvik_panel_app_api_nodes_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZub2RlcyUyRiU1QmlkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZub2RlcyUyRiU1QmlkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbm9kZXMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDUHJvamVjdHMlNUNub3JkdmlrJTVDbm9yZHZpa19wYW5lbCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q1Byb2plY3RzJTVDbm9yZHZpayU1Q25vcmR2aWtfcGFuZWwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxQcm9qZWN0c1xcXFxub3JkdmlrXFxcXG5vcmR2aWtfcGFuZWxcXFxcYXBwXFxcXGFwaVxcXFxub2Rlc1xcXFxbaWRdXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ub2Rlcy9baWRdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbm9kZXMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbm9kZXMvW2lkXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXFByb2plY3RzXFxcXG5vcmR2aWtcXFxcbm9yZHZpa19wYW5lbFxcXFxhcHBcXFxcYXBpXFxcXG5vZGVzXFxcXFtpZF1cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnodes%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&page=%2Fapi%2Fnodes%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnodes%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProjects%5Cnordvik%5Cnordvik_panel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();